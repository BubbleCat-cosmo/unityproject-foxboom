### Fox Boom

2025-11-17

这次打算制作一个横版平台跳跃类的小游戏，因为在社区里刷到了有关这方面的经验交流帖子，所以想自己动手尝试一下。

2025-11-18

果然在角色和地面有碰撞有连续碰撞检测的时候问题开始出现。角色应用矩形碰撞体的时候会出现卡住的情况，换成胶囊形碰撞体就没有问题。其中的问题还要深入研究一下。

2025-11-19

进展几乎零。为了避免上面的问题，有一种解决方案是让角色的碰撞体始终离地面有一点距离。类似于Skin Width？但是unity2D中似乎没有这个调节参数，Project Setting->Physics 2D中的Default Contact Offset好像也不是干这个的。试了不同方式的脚本控制（通过射线检测地面，然后对角色碰撞体进行位移操作）也没能解决这个问题。究其原因应该是矩形碰撞体底部与地面接触点太多，导致计算出现问题，从而卡住，而上面的方法并没有从“减少碰撞点”这个根本的方向来解决问题。

于是我取消了角色的重力，手动将角色放置在离地面一点距离的位置，杜绝了过多的碰撞检测。因为目前角色只能左右移动，所以效果很好。但是后续可能要实现上斜坡、跳跃等功能，需要思考新的控制或者判定方法。

不要问为什么不改为胶囊形碰撞体，我就想试这个。

2025-11-20

脚本是有用的，没用的是我。实现类似Skin Width效果的脚本忘记在unity中设置LayerMask了，所以一直没检测到地面，改一下就好了。

中间纠结了一下代码结构，是把角色所有的组件在一个脚本中全部获取，然后利用单例，供其他脚本使用好一些，还是在每个脚本中单独获取好一些呢？最后决定还是在每个脚本中单独获取，简单明了。

然后正在在实现跳跃功能，还没弄完，这部分就先不上传了。

2025-11-25

回来了，中间几天去做了下限时任务。勉强实现了跳跃功能，还有很多地方要优化。那个经验交流的帖子里给的代码非常奇怪，角色的跳跃要依赖角色移动与地面碰撞获取的信息来实现，也就是说如果角色一段时间不移动（被认定角色与地面没有碰撞），角色跳跃的方法就会因获取不到相应的信息而无法实现。好吧，也许那个帖子的重点或许不在这里，应该主要是想说通过计算法线实现可以在斜坡上移动的一种方法思路吧。

不过这个帖子分享的通过控制加速度来进行移动控制的思路很有参考价值，比控制速度灵活，比控制力精确。

后面要优化的地方有Skin Width，因为加了跳跃，这里肯定就不能继续用地面检测了；

射线检测的地方可以考虑替换成BoxCast，更加精确一些；

然后角色移动碰到墙壁的时候要对后续的速度做出限制；

跳跃要更加干脆利落。

2025-11-26

优化了很多地方。角色移动的手感勉强合格，还有很多要微调的地方。

2025-11-27

尝试了一下那个贴子里通过边缘检测来对玩家操作做出宽容的方法，调整了一些参数，但是感觉效果不是很好，注释掉了，也许以后可以优化？优化了代码结构，添加了二段跳，角色状态管理沿用了之前项目里的代码，还有很多地方要进行适配。

写这个蛮有意思的，感觉就像拉屎记录。

2025-11-30

最近事情很多，精力不够用，进度很慢。构思了一下剧情，类似于小狐狸找爸爸？虽然并没有狐狸爸爸的素材。目前构想的一些玩法实现可能对现在的我有些困难，不过能够自己设计关卡还是很开心的（这么多游戏可不是白玩的），慢慢来吧，总比做连AI都胡言乱语的软件工程作业简单。

2025-12-6

被操作系统课设折磨回来了。开始写怪物的脚本，对于既要具有刚体实现物理效果，又要有碰撞体去触发事件的情况，可以通过添加子对象来实现，然后做好分层，在碰撞矩阵去精确控制即可。但是父、子对象之间要如何转递信息，还要进一步探索。

然后发现了角色会卡在墙上的bug，目前还不知道是什么原因。

先这样吧，期末周，各种大大小小的事情都来了，代码部分还只有框架，写完再上传。

2025-12-7

问题一个接着一个。首先是Skin Width的应用，这个脚本应用后不可避免地会产生抖动，在加上摄像机是一直跟随玩家的，就会导致画面出现轻微抖动，这个问题后期通过对摄像机跟随脚本的调整应该可以解决。但奇怪的是这个Skin Width的脚本应用到怪物对象上后，抖动的幅度变大了，不知道是什么原因。

然后是之前提到的角色会卡在墙上的现象，应该是瓦片碰撞箱的问题，我用一整个矩形作为墙壁测试了很多次，都没有出现卡在上面的情况。但是这个瓦片地图的碰撞箱我明明勾选了作为整体使用啊，这里面的细节还要继续探究。

