### Fox Boom

2025-11-17

这次打算制作一个横版平台跳跃类的小游戏，因为在社区里刷到了有关这方面的经验交流帖子，所以想自己动手尝试一下。

2025-11-18

果然在角色和地面有碰撞有连续碰撞检测的时候问题开始出现。角色应用矩形碰撞体的时候会出现卡住的情况，换成胶囊形碰撞体就没有问题。其中的问题还要深入研究一下。

2025-11-19

进展几乎零。为了避免上面的问题，有一种解决方案是让角色的碰撞体始终离地面有一点距离。类似于Skin Width？但是unity2D中似乎没有这个调节参数，Project Setting->Physics 2D中的Default Contact Offset好像也不是干这个的。试了不同方式的脚本控制（通过射线检测地面，然后对角色碰撞体进行位移操作）也没能解决这个问题。究其原因应该是矩形碰撞体底部与地面接触点太多，导致计算出现问题，从而卡住，而上面的方法并没有从“减少碰撞点”这个根本的方向来解决问题。

于是我取消了角色的重力，手动将角色放置在离地面一点距离的位置，杜绝了过多的碰撞检测。因为目前角色只能左右移动，所以效果很好。但是后续可能要实现上斜坡、跳跃等功能，需要思考新的控制或者判定方法。

不要问为什么不改为胶囊形碰撞体，我就想试这个。

2025-11-20

脚本是有用的，没用的是我。实现类似Skin Width效果的脚本忘记在unity中设置LayerMask了，所以一直没检测到地面，改一下就好了。

中间纠结了一下代码结构，是把角色所有的组件在一个脚本中全部获取，然后利用单例，供其他脚本使用好一些，还是在每个脚本中单独获取好一些呢？最后决定还是在每个脚本中单独获取，简单明了。

然后正在在实现跳跃功能，还没弄完，这部分就先不上传了。

2025-11-25

回来了，中间几天去做了下限时任务。勉强实现了跳跃功能，还有很多地方要优化。那个经验交流的帖子里给的代码非常奇怪，角色的跳跃要依赖角色移动与地面碰撞获取的信息来实现，也就是说如果角色一段时间不移动（被认定角色与地面没有碰撞），角色跳跃的方法就会因获取不到相应的信息而无法实现。好吧，也许那个帖子的重点或许不在这里，应该主要是想说通过计算法线实现可以在斜坡上移动的一种方法思路吧。

不过这个帖子分享的通过控制加速度来进行移动控制的思路很有参考价值，比控制速度灵活，比控制力精确。

后面要优化的地方有Skin Width，因为加了跳跃，这里肯定就不能继续用地面检测了；

射线检测的地方可以考虑替换成BoxCast，更加精确一些；

然后角色移动碰到墙壁的时候要对后续的速度做出限制；

跳跃要更加干脆利落。



